<!-- index.html -->

<!DOCTYPE html>
<html lang="en">
<head>
  <title>Scraper Test</title>
</head>
<body>

  <h1>Link Scraper Test Page</h1>
  <input id="url-input" type="url" placeholder="Paste a link here...">
  <button id="send-button">Send to Server</button>

  <script>
    // Get the HTML elements we need
    const urlInput = document.getElementById('url-input');
    const sendButton = document.getElementById('send-button');

    // Add a click listener to the button
    sendButton.addEventListener('click', () => {
      const urlToSend = urlInput.value;
      console.log('Sending this URL to the server:', urlToSend);

      // This is the modern way to make an API request in plain JavaScript
      fetch('http://localhost:3000/api/scrape-preview', {
        method: 'POST', // We are sending data
        headers: {
          'Content-Type': 'application/json', // We're sending it in JSON format
        },
        // Convert our JavaScript object into a JSON string
        body: JSON.stringify({ url: urlToSend }), 
      })
      .then(response => response.json()) // Parse the server's JSON response
      .then(data => {
        // Log the server's confirmation message to the browser console
        console.log('Server responded:', data); 
      })
      .catch(error => {
        console.error('Error:', error);
      });
    });
  </script>

</body>
</html>